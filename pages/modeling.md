# 데이터 모델링

데이터 모델링은 현실 세계의 개념을 데이터베이스의 세계에서 다룰 수 있도록 **재해석**하는 작업을 말합니다.

데이터 모델링을 하기 위해서는 먼저 모델링의 대상이 되는 현실 세계를 잘 이해할 필요가 있습니다.
이를 위해 데이터 요구사항을 정리하고, 관계자와 인터뷰를 하는 등의 활동을 통해
**현실 세계에서의 작업이 어떤 절차를 통해 이루어지는지**를 자세히 파악해야 합니다.

이 문서에서는 널리 사용되는 모델링 방법인 [개체-관계 모델](https://ko.wikipedia.org/wiki/%EA%B0%9C%EC%B2%B4-%EA%B4%80%EA%B3%84_%EB%AA%A8%EB%8D%B8)을 다룰 것입니다.
개체-관계 모델을 통해 모델링을 할 때에는, 위에서 파악한 절차로부터 아래의 요소들을 이끌어 내게 됩니다.

- **개체 (entity)** : 절차에 관여하는 어떤 **것(thing)**. 식별 가능한 사람, 장소, 사물, 사건 등
- **속성 (attribute)** : 개체가 가지는 성질
- **관계 (relationship)** : 개체 간에 가지는 관계

데이터베이스에는 각각 아래와 같은 형태로 저장될 수 있습니다.

- 개체 - 테이블
- 속성 - 개체를 나타내는 테이블의 컬럼
- 관계 - 외래 키, 혹은 관계 테이블

# 관계의 차수(Cardinality)

두 개체 간 관계에서 각 개체의 참여자 수를 차수(cardinality)라고 부릅니다. 차수는 일반적으로 `1:1`, `1:N`, `M:N`의 세 가지 형태로 분류합니다.

## 1:1 관계

데이터베이스에서는 1:1 관계에 있는 두 엔티티를 하나의 테이블에 저장하거나, 두 엔티티를 각각 다른 테이블에 저장하고 한 테이블의 기본 키를 다른 테이블에 대한 외래 키로 지정하는 등의 방법을 사용해서 1:1 관계를 표현합니다.

## 1:N 관계

데이터베이스에서는 1:N 관계에 있는 두 엔티티를 각각 다른 테이블에 저장하고, N 측의 테이블에 다른 테이블에 대한 외래 키를 둬서 1:N 관계를 표현합니다.

## M:N 관계

데이터베이스에서는 외래 키 하나만 가지고는 M:N 관계를 표현할 수 없으므로, 별도의 **관계 테이블**을 두고 관계 테이블에 두 개의 외래 키를 두는 방법으로 M:N 관계를 표현합니다.

# 정규화 (Normalization)

정규화란 데이터의 **중복을 최소화**할 수 있도록 데이터를 구조화하는 작업을 말합니다. 일반적으로, 정규화가 잘 된 데이터베이스는 작고 잘 조직된 여러 개의 테이블로 나누어집니다. 예를 들어서, 어떤 학원의 성적 관리 데이터베이스에서는 성적 데이터를 아래와 같이 저장할 수 있을 것입니다.

| 이름 | 과목 | 점수 | 전화번호 |
| --- | --- | --- | --- |
| 김이린 | 국어 | 88 | 010-1234-5678 |
| 김이린 | 영어 | 76 | 010-1234-5678 |
| 김이린 | 수학 | 65 | 010-1234-5678 |
| 이영빈 | 국어 | 60 | 010-8765-4321 |
| 이영빈 | 영어 | 91 | 010-8765-4321 |
| 이영빈 | 수학 | 85 | 010-8765-4321 |
| 구지용 | 국어 | 43 | 010-5555-5555 |
| 구지용 | 영어 | 74 | 010-5555-5555 |
| 구지용 | 수학 | 56 | 010-5555-5555 |

여기서 이름, 과목, 전화번호 등의 정보는 여러 행에 걸쳐 중복되어 있습니다. 이를 여러 테이블로 나누어서 아래와 같이 저장할 수도 있을 것입니다.

### 학생 테이블

| 학생 ID | 이름 | 전화번호 |
| --- | --- | --- |
| 1 | 김이린 | 010-1234-5678 |
| 2 | 이영빈 | 010-8765-4321 |
| 3 | 구지용 | 010-5555-5555 |

### 과목 테이블

| 과목 ID | 과목 |
| --- | --- |
| 1 | 국어 |
| 2 | 영어 |
| 3 | 수학 |

### 점수 테이블

| 학생 ID | 과목 ID | 점수 |
| --- | --- | --- |
| 1 | 1 | 88 |
| 1 | 2 | 76 |
| 1 | 3 | 65 |
| 2 | 1 | 60 |
| 2 | 2 | 91 |
| 2 | 3 | 85 |
| 3 | 1 | 43 |
| 3 | 2 | 74 |
| 3 | 3 | 56 |

정규화를 거치고 나서 테이블이 나뉘어져서 조금 더 복잡해졌지만, 중복되는 데이터가 없어져서 데이터를 관리하기도 쉬워지고 또 데이터가 차지하는 용량도 줄어들었습니다.

보통 데이터 모델링을 할 때에는 정규화 과정을 통해 중복을 없애주는 것이 좋습니다. 다만 성능상의 이유로 일부러 데이터를 중복시켜 저장하는 경우도 있는데, 이를 **반정규화**라고 합니다.

# Entity Relationship Diagram

ERD(Entity Relationship Diagram)은 개체, 속성, 관계를 도표로 나타내는 방법으로, 데이터 모델링의 결과를 시각화하기 위해 널리 사용됩니다.
MySQL Workbench을 통해 ERD를 그려볼 수 있습니다.